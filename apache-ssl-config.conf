# Apache SSL Configuration for COSTAATT Document Upload System
# Place this content in: C:\Apache24\conf\extra\httpd-ssl.conf

<VirtualHost _default_:443>
    ServerName docupload.costaatt.edu.tt
    DocumentRoot "C:/COSTAATT/DocUpload/public"
    
    SSLEngine on
    SSLCertificateFile "C:/COSTAATT/ssl/docupload.costaatt.edu.tt/certificate.crt"
    SSLCertificateKeyFile "C:/COSTAATT/ssl/docupload.costaatt.edu.tt/private.key"
    SSLCertificateChainFile "C:/COSTAATT/ssl/docupload.costaatt.edu.tt/gd_bundle-g2-g1.crt"
    
    # SSL Security Settings
    SSLProtocol all -SSLv3 -TLSv1 -TLSv1.1
    SSLCipherSuite ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256
    SSLHonorCipherOrder off
    SSLSessionTickets off
    
    # Directory Configuration
    <Directory "C:/COSTAATT/DocUpload/public">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Laravel URL Rewriting
        RewriteEngine On
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php [QSA,L]
    </Directory>
    
    # Security Headers
    Header always set Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
    
    # Logging
    ErrorLog "C:/Apache24/logs/docupload-ssl-error.log"
    CustomLog "C:/Apache24/logs/docupload-ssl-access.log" common
    LogLevel warn ssl:info
</VirtualHost>
